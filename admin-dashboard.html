<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - EduQuest</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary: #10b981;
      --secondary: #004d40;
      --accent: #a5d6a7;
      --warning: #f59e0b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      background: linear-gradient(135deg, #ecfdf5, #d1fae5);
      min-height: 100vh;
    }

    .header {
      background: var(--secondary);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header h1 {
      font-size: 1.8rem;
    }

    .admin-info {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .logout-btn {
      background: #ef4444;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .logout-btn:hover {
      background: #dc2626;
    }

    .container {
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid #d1fae5;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 12px 25px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      color: #666;
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      border-left: 4px solid var(--primary);
    }

    .stat-card h3 {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    .stat-card .value {
      font-size: 2.5rem;
      color: var(--primary);
      font-weight: bold;
    }

    .form-section {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }

    .form-section h3 {
      color: var(--secondary);
      margin-bottom: 20px;
      font-size: 1.3rem;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--secondary);
      font-weight: 600;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 6px rgba(16, 185, 129, 0.3);
    }

    .btn {
      padding: 12px 25px;
      background: linear-gradient(90deg, #34d399, var(--primary));
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(16, 185, 129, 0.3);
    }

    .btn-danger {
      background: #ef4444;
    }

    .btn-danger:hover {
      background: #dc2626;
    }

    .users-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .users-table thead {
      background: var(--secondary);
      color: white;
    }

    .users-table th,
    .users-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }

    .users-table tbody tr:hover {
      background: #f9fafb;
    }

    .success {
      background: #c8e6c9;
      color: #1b5e20;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .error {
      background: #ffcdd2;
      color: #c62828;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .notification-item {
      background: #f9fafb;
      padding: 15px;
      border-left: 4px solid var(--primary);
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .notification-item .time {
      font-size: 0.85rem;
      color: #999;
      margin-top: 5px;
    }

    .quiz-list {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .quiz-item {
      padding: 20px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .quiz-info h4 {
      color: var(--secondary);
      margin-bottom: 5px;
    }

    .quiz-info p {
      font-size: 0.9rem;
      color: #666;
    }

    .quiz-actions {
      display: flex;
      gap: 10px;
    }

    .quiz-actions button {
      padding: 6px 12px;
      font-size: 0.85rem;
    }

    .options-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }

      .tabs {
        flex-wrap: wrap;
      }

      .options-group {
        grid-template-columns: 1fr;
      }

      .users-table {
        font-size: 0.85rem;
      }

      .users-table th,
      .users-table td {
        padding: 10px;
      }

      .quiz-item {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
  <script src="common.js"></script>
</head>
<body>
  <div class="header">
    <h1>üë®‚Äçüíº Admin Dashboard</h1>
    <div class="admin-info">
      <span id="adminEmail"></span>
      <button class="logout-btn" onclick="adminLogout()">Logout</button>
    </div>
  </div>

  <div class="container">
    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('analytics')">
        <i class="fas fa-chart-bar"></i> Analytics
      </button>
      <button class="tab-btn" onclick="switchTab('quizzes')">
        <i class="fas fa-question-circle"></i> Quiz Manager
      </button>
      <button class="tab-btn" onclick="switchTab('notifications')">
        <i class="fas fa-bell"></i> Notifications
      </button>
      <button class="tab-btn" onclick="switchTab('projects')">
        <i class="fas fa-folder-open"></i> Projects
      </button>

      <!--<button class="tab-btn" onclick="switchTab('auditlog')">
        <i class="fas fa-history"></i> Audit Log
      </button>-->
    </div>

    <!-- Analytics Tab -->
    <div id="analytics" class="tab-content active">
      <div class="analytics-grid">
        <div class="stat-card">
          <h3>Total Users</h3>
          <div class="value" id="totalUsers">0</div>
        </div>
        <div class="stat-card">
          <h3>School Students</h3>
          <div class="value" id="schoolStudents">0</div>
        </div>
        <div class="stat-card">
          <h3>College Students</h3>
          <div class="value" id="collegeStudents">0</div>
        </div>
        <div class="stat-card">
          <h3>Avg School Score</h3>
          <div class="value" id="avgSchoolScore">0</div>
        </div>
      </div>

      <div class="form-section">
        <h3>Top Performers - School</h3>
        <table class="users-table">
          <thead>
            <tr>
              <th>Rank</th>
              <th>Name</th>
              <th>Email</th>
              <th>Total Score</th>
              <th>Join Date</th>
            </tr>
          </thead>
          <tbody id="schoolLeaderboard"></tbody>
        </table>
      </div>

      <div class="form-section">
        <h3>Top Performers - College</h3>
        <table class="users-table">
          <thead>
            <tr>
              <th>Rank</th>
              <th>Name</th>
              <th>Email</th>
              <th>Total Score</th>
              <th>Join Date</th>
            </tr>
          </thead>
          <tbody id="collegeLeaderboard"></tbody>
        </table>
      </div>

      <div class="form-section">
        <h3>Search User Performance</h3>
        <div class="form-group">
          <label>Search by Email</label>
          <input type="text" id="searchEmail" placeholder="user@email.com">
        </div>
        <button class="btn" onclick="searchUser()">Search</button>
        <div id="userPerformance" style="margin-top: 20px;"></div>
      </div>
    </div>

    <!-- Quiz Manager Tab -->
    <div id="quizzes" class="tab-content">
      <div class="form-section">
        <h3>Create New Quiz</h3>
        <div id="successMsg" class="success"></div>
        <div id="errorMsg" class="error"></div>

        <div class="form-group">
          <label>Quiz Title</label>
          <input type="text" id="quizTitle" placeholder="e.g., Climate Change 101">
        </div>

        <div class="form-group">
          <label>Category</label>
          <select id="quizCategory">
            <option value="">Select Category</option>
            <option value="biodiversity">Biodiversity</option>
            <option value="climate">Climate Change</option>
            <option value="waste">Waste Management</option>
            <option value="energy">Renewable Energy</option>
            <option value="water">Water Conservation</option>
            <option value="sustainability">Sustainability</option>
          </select>
        </div>

        <div class="form-group">
          <label>Difficulty Level</label>
          <select id="quizDifficulty">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>

        <div class="form-group">
          <label>Target Audience</label>
          <select id="quizAudience">
            <option value="school">School Students</option>
            <option value="college">College Students</option>
            <option value="both">Both</option>
          </select>
        </div>

        <div id="questionsContainer"></div>

        <button class="btn" style="margin-top: 10px;" onclick="addQuestionField()">+ Add Question</button>
        <button class="btn" style="background: var(--warning); margin-left: 10px;" onclick="submitQuiz()">Create Quiz</button>
      </div>

      <div class="form-section">
        <h3>Existing Quizzes</h3>
        <div class="quiz-list" id="quizList"></div>
      </div>
    </div>

    <!-- Notifications Tab -->
    <div id="notifications" class="tab-content">
      <div class="form-section">
        <h3>Send Notification</h3>
        <div class="form-group">
          <label>Message</label>
          <textarea id="notificationMsg" placeholder="Enter notification message" style="resize: vertical; min-height: 80px;"></textarea>
        </div>

        <div class="form-group">
          <label>Target Audience</label>
          <select id="notificationAudience">
            <option value="school">School Students</option>
            <option value="college">College Students</option>
            <option value="both">All Users</option>
          </select>
        </div>

        <button class="btn" onclick="sendNotification()">Send Notification</button>
      </div>

      <div class="form-section">
        <h3>Notification History</h3>
        <div id="notificationHistory"></div>
      </div>
    </div>

    <!-- Projects Tab -->
<div id="projects" class="tab-content">
  <h2>Submitted Projects</h2>

  <table border="1" width="100%" cellpadding="10">
    <thead>
      <tr>
        <th>Title</th>
        <th>Category</th>
        <th>Student</th>
        <th>Email</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody id="adminProjects"></tbody>
  </table>
</div>



    <!-- Audit Log Tab -->
    <!--<div id="auditlog" class="tab-content">
      <div class="form-section">
        <h3>Admin Activity Log</h3>
        <div id="auditLogContainer"></div>
      </div>
    </div>
  </div>-->

  <script>
    // Check admin session on page load
    document.addEventListener('DOMContentLoaded', function() {
      initializeStorage();
      checkAdmin();
    });

    function checkAdmin() {
      const adminEmail = localStorage.getItem('currentAdmin');
      const adminSession = localStorage.getItem('adminSession');

      if (!adminEmail || !adminSession) {
        window.location.href = 'admin-login.html';
        return;
      }

      try {
        const session = JSON.parse(adminSession);
        const expiresAt = new Date(session.expiresAt);

        if (new Date() > expiresAt) {
          localStorage.removeItem('adminSession');
          localStorage.removeItem('currentAdmin');
          window.location.href = 'admin-login.html';
          return;
        }
      } catch(err) {
        console.log('Session check error');
      }

      document.getElementById('adminEmail').textContent = 'Admin: ' + adminEmail;
      loadAnalytics();
    }

    function switchTab(tabName) {
      if (tabName === 'projects') loadProjectsForAdmin();

  document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

  document.getElementById(tabName).classList.add('active');
  event.target.classList.add('active');

  if (tabName === 'analytics') loadAnalytics();
  if (tabName === 'quizzes') loadQuizzes();
  if (tabName === 'notifications') loadNotifications();
  if (tabName === 'projects') loadProjectsForAdmin();
}


    function loadAnalytics() {
      const analytics = getAnalytics();
      document.getElementById('totalUsers').textContent = analytics.totalUsers;
      document.getElementById('schoolStudents').textContent = analytics.schoolStudents;
      document.getElementById('collegeStudents').textContent = analytics.collegeStudents;
      document.getElementById('avgSchoolScore').textContent = analytics.averageSchoolScore;

      const schoolLeaderboard = getSchoolLeaderboard();
      const collegeLeaderboard = getCollegeLeaderboard();

      document.getElementById('schoolLeaderboard').innerHTML = schoolLeaderboard
        .map((user, idx) => `
          <tr>
            <td>${idx + 1}</td>
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.totalScore || 0}</td>
            <td>${new Date(user.joinDate).toLocaleDateString()}</td>
          </tr>
        `).join('') || '<tr><td colspan="5" style="text-align: center;">No data</td></tr>';

      document.getElementById('collegeLeaderboard').innerHTML = collegeLeaderboard
        .map((user, idx) => `
          <tr>
            <td>${idx + 1}</td>
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.totalScore || 0}</td>
            <td>${new Date(user.joinDate).toLocaleDateString()}</td>
          </tr>
        `).join('') || '<tr><td colspan="5" style="text-align: center;">No data</td></tr>';
    }
    


    function searchUser() {
      const email = document.getElementById('searchEmail').value.trim();
      if (!email) return;

      const performance = getUserPerformance(email);
      const users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users.find(u => u.email === email);

      if (!user) {
        document.getElementById('userPerformance').innerHTML = '<p style="color: red;">User not found</p>';
        return;
      }

      let html = `
        <div style="background: white; padding: 20px; border-radius: 12px;">
          <h4>${user.name}</h4>
          <p><strong>Email:</strong> ${user.email}</p>
          <p><strong>Level:</strong> ${user.level}</p>
          <p><strong>Total Score:</strong> ${user.totalScore || 0}</p>
          <p><strong>Join Date:</strong> ${new Date(user.joinDate).toLocaleDateString()}</p>
          <h5 style="margin-top: 20px;">Quiz Scores:</h5>
      `;

      if (performance.length === 0) {
        html += '<p>No quiz attempts yet</p>';
      } else {
        html += '<ul>';
        performance.forEach(p => {
          html += `<li>Quiz: ${p.quizId} | Score: ${p.score}/${p.totalQuestions} | Date: ${new Date(p.timestamp).toLocaleDateString()}</li>`;
        });
        html += '</ul>';
      }

      html += '</div>';
      document.getElementById('userPerformance').innerHTML = html;
    }

    function addQuestionField() {
      const container = document.getElementById('questionsContainer');
      const questionNum = container.children.length + 1;

      const html = `
        <div style="background: #f9fafb; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
          <h4>Question ${questionNum}</h4>
          <div class="form-group">
            <label>Question Text</label>
            <input type="text" class="question-text" placeholder="Enter question">
          </div>
          <div class="options-group">
            <input type="text" class="option-text" placeholder="Option A">
            <input type="text" class="option-text" placeholder="Option B">
            <input type="text" class="option-text" placeholder="Option C">
            <input type="text" class="option-text" placeholder="Option D">
          </div>
          <div class="form-group">
            <label>Correct Answer (0-3)</label>
            <input type="number" class="correct-answer" min="0" max="3" value="0">
          </div>
        </div>
      `;

      container.insertAdjacentHTML('beforeend', html);
    }

    function submitQuiz() {
      const title = document.getElementById('quizTitle').value.trim();
      const category = document.getElementById('quizCategory').value;
      const difficulty = document.getElementById('quizDifficulty').value;
      const audience = document.getElementById('quizAudience').value;

      if (!title || !category || !difficulty || !audience) {
        showError('Please fill all fields');
        return;
      }

      const questions = [];
      const questionTexts = document.querySelectorAll('.question-text');
      const optionTexts = document.querySelectorAll('.option-text');
      const correctAnswers = document.querySelectorAll('.correct-answer');

      for (let i = 0; i < questionTexts.length; i++) {
        if (!questionTexts[i].value.trim()) continue;

        questions.push({
          id: i + 1,
          question: questionTexts[i].value,
          options: [
            optionTexts[i * 4].value || 'Option A',
            optionTexts[i * 4 + 1].value || 'Option B',
            optionTexts[i * 4 + 2].value || 'Option C',
            optionTexts[i * 4 + 3].value || 'Option D'
          ],
          correctAnswer: parseInt(correctAnswers[i].value) || 0,
          timeLimit: 30
        });
      }

      if (questions.length === 0) {
        showError('Please add at least one question');
        return;
      }

      const quiz = {
        id: Date.now(),
        title: title,
        category: category,
        difficulty: difficulty,
        questions: questions,
        createdBy: localStorage.getItem('currentAdmin'),
        createdDate: new Date().toISOString(),
        targetAudience: audience
      };

      if (audience === 'school' || audience === 'both') {
        let schoolQuizzes = JSON.parse(localStorage.getItem('schoolQuizzes')) || [];
        schoolQuizzes.push(quiz);
        localStorage.setItem('schoolQuizzes', JSON.stringify(schoolQuizzes));
      }

      if (audience === 'college' || audience === 'both') {
        let collegeQuizzes = JSON.parse(localStorage.getItem('collegeQuizzes')) || [];
        collegeQuizzes.push(quiz);
        localStorage.setItem('collegeQuizzes', JSON.stringify(collegeQuizzes));
      }

      addAuditLog(localStorage.getItem('currentAdmin'), 'CREATE_QUIZ', `Created quiz: ${title}`);
      addNotification(audience, `New Quiz Available: ${title} (${questions.length} questions)`, 'quiz_update');

      showSuccess('Quiz created successfully!');
      setTimeout(() => {
        document.getElementById('quizTitle').value = '';
        document.getElementById('questionsContainer').innerHTML = '';
        loadQuizzes();
      }, 1500);
    }

    function loadQuizzes() {
      const schoolQuizzes = JSON.parse(localStorage.getItem('schoolQuizzes')) || [];
      const collegeQuizzes = JSON.parse(localStorage.getItem('collegeQuizzes')) || [];

      let html = '';
      [...schoolQuizzes, ...collegeQuizzes].forEach(quiz => {
        html += `
          <div class="quiz-item">
            <div class="quiz-info">
              <h4>${quiz.title}</h4>
              <p>${quiz.category} | ${quiz.difficulty} | ${quiz.questions.length} questions | ${quiz.targetAudience}</p>
            </div>
            <div class="quiz-actions">
              <button class="btn btn-danger" onclick="deleteQuiz(${quiz.id})">Delete</button>
            </div>
          </div>
        `;
      });

      document.getElementById('quizList').innerHTML = html || '<p style="padding: 20px; text-align: center;">No quizzes created yet</p>';
    }

    function deleteQuiz(quizId) {
      if (!confirm('Delete this quiz?')) return;

      let schoolQuizzes = JSON.parse(localStorage.getItem('schoolQuizzes')) || [];
      let collegeQuizzes = JSON.parse(localStorage.getItem('collegeQuizzes')) || [];

      schoolQuizzes = schoolQuizzes.filter(q => q.id !== quizId);
      collegeQuizzes = collegeQuizzes.filter(q => q.id !== quizId);

      localStorage.setItem('schoolQuizzes', JSON.stringify(schoolQuizzes));
      localStorage.setItem('collegeQuizzes', JSON.stringify(collegeQuizzes));

      addAuditLog(localStorage.getItem('currentAdmin'), 'DELETE_QUIZ', `Deleted quiz: ${quizId}`);
      loadQuizzes();
    }

    function sendNotification() {
      const msg = document.getElementById('notificationMsg').value.trim();
      const audience = document.getElementById('notificationAudience').value;

      if (!msg) {
        showError('Please enter a message');
        return;
      }

      addNotification(audience, msg, 'admin_announcement');
      addAuditLog(localStorage.getItem('currentAdmin'), 'SEND_NOTIFICATION', `Sent to ${audience}`);

      showSuccess('Notification sent!');
      document.getElementById('notificationMsg').value = '';
      loadNotifications();
    }

    function loadNotifications() {
      const schoolNoti = getNotifications('school');
      const collegeNoti = getNotifications('college');

      let html = '';
      [...schoolNoti, ...collegeNoti]
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 50)
        .forEach(n => {
          html += `
            <div class="notification-item">
              <p>${n.message}</p>
              <div class="time">${new Date(n.timestamp).toLocaleString()}</div>
            </div>
          `;
        });

      document.getElementById('notificationHistory').innerHTML = html || '<p style="text-align: center;">No notifications</p>';
    }

    function loadAuditLog() {
      const auditLog = JSON.parse(localStorage.getItem('auditLog')) || [];

      let html = '<table class="users-table"><thead><tr><th>Admin</th><th>Action</th><th>Details</th><th>Time</th></tr></thead><tbody>';

      auditLog
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 100)
        .forEach(log => {
          html += `
            <tr>
              <td>${log.admin}</td>
              <td>${log.action}</td>
              <td>${log.details}</td>
              <td>${new Date(log.timestamp).toLocaleString()}</td>
            </tr>
          `;
        });

      html += '</tbody></table>';
      document.getElementById('auditLogContainer').innerHTML = html;
    }

    function showSuccess(msg) {
      const div = document.getElementById('successMsg');
      div.textContent = '‚úì ' + msg;
      div.style.display = 'block';
      setTimeout(() => { div.style.display = 'none'; }, 3000);
    }

    function showError(msg) {
      const div = document.getElementById('errorMsg');
      div.textContent = '‚úó ' + msg;
      div.style.display = 'block';
      setTimeout(() => { div.style.display = 'none'; }, 3000);
    }

    function adminLogout() {
      if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('currentAdmin');
        localStorage.removeItem('adminSession');
        window.location.href = 'admin-login.html';
      }
    }


    function loadProjectsForAdmin() {
  const projects = JSON.parse(localStorage.getItem('projects')) || [];
  const tbody = document.getElementById('adminProjects');

  if (projects.length === 0) {
    tbody.innerHTML = `
      <tr>
        <td colspan="5" style="text-align:center;">
          No projects submitted
        </td>
      </tr>
    `;
    return;
  }

  tbody.innerHTML = projects.map(p => `
    <tr>
      <td>${p.title}</td>
      <td>${p.category}</td>
      <td>${p.authorName}</td>
      <td>${p.author}</td>
      <td>${new Date(p.uploadDate).toLocaleDateString()}</td>
    </tr>
  `).join('');
}



function deleteAdminProject(projectId) {
  if (!confirm('Delete this project?')) return;

  let projects = JSON.parse(localStorage.getItem('projects')) || [];
  projects = projects.filter(p => p.id !== projectId);
  localStorage.setItem('projects', JSON.stringify(projects));

  loadProjectsForAdmin();
}

  </script>
</body>
</html>
